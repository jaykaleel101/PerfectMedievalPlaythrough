<?xml version="1.0" encoding="utf-8"?>
<Patch>
    <Operation Class="PatchOperationSequence">
    <operations>      
    <!-- for some reason MO messed up all fuelable stuff, so we try to patch it again right here-->
    <!-- first remove timber-->
        <li Class="PatchOperationRemove">
            <xpath>Defs/ThingDef[
            defName="DankPyon_StoneOven" or
            defName="DankPyon_RusticCookingTable" or
            defName="DankPyon_Furnace" or
            defName="DankPyon_Grill" or
            defName="DankPyon_WoodBurningStove" or
            defName="DankPyon_RusticHearth" or
            defName="DankPyon_WoodBurningStove" or
            defName="DankPyon_StewPot"
            ]/comps/li[@Class="CompProperties_Refuelable"]/fuelFilter/categories/li[text() = 'DankPyon_Wood']</xpath>
        </li>
        <!-- then add apothecary charcoal -->
        <li Class="PatchOperationAdd">
            <xpath>Defs/ThingDef[
            defName="DankPyon_StoneOven" or
            defName="DankPyon_RusticCookingTable" or
            defName="DankPyon_Furnace" or
            defName="DankPyon_Grill" or
            defName="DankPyon_WoodBurningStove" or
            defName="DankPyon_RusticHearth" or
            defName="DankPyon_WoodBurningStove" or
            defName="DankPyon_StewPot"
            ]/comps/li[@Class="CompProperties_Refuelable"]/fuelFilter/thingDefs</xpath>
            <value>
                <li>AYCharcoal</li>
            </value>
        </li>
        <li Class="PatchOperationAdd">
            <xpath>Defs/ProcessorFramework.ProcessDef[defName="DankPyon_SmeltingOre_Coal"]</xpath>
            <value>
                <bonusOutputs>
                    <AYWoodAshes>(1.0, 100)</AYWoodAshes>
                </bonusOutputs>
            </value>
        </li>        
        <li Class="PatchOperationReplace">
            <xpath>Defs/RecipeDef[defName="MakeAYCharcoalFromBenches"]/description</xpath>
            <value>
                <description>Make 30 Charcoal.</description>
            </value>
        </li>
        <li Class="PatchOperationReplace">
            <xpath>Defs/RecipeDef[defName="MakeAYCharcoalFromBenches"]/ingredients</xpath>
            <value>
                <ingredients>
                    <li>
                    <filter>
                        <thingDefs>
                        <li>WoodLog</li>
                        <li>DankPyon_DarkWoodLog</li>
                        <li>DankPyon_ElvenWoodLog</li>
                        <li>DankPyon_DryadWoodLog</li>
                        <li>DankPyon_AncientWoodLog</li>
                        </thingDefs>
                    </filter>
                    <count>20</count>
                    </li>
                </ingredients>
            </value>
        </li>
        <li Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="MakeAYCharcoalFromBenches"]/fixedIngredientFilter/thingDefs</xpath>
            <value>
                <li>DankPyon_DarkWoodLog</li>
                <li>DankPyon_ElvenWoodLog</li>
                <li>DankPyon_DryadWoodLog</li>
                <li>DankPyon_AncientWoodLog</li>
            </value>
        </li>
        <li Class="PatchOperationReplace">
            <xpath>Defs/RecipeDef[defName="MakeAYCharcoalFromBenches"]/products</xpath>
            <value>
                <products>
                    <AYCharcoal>30</AYCharcoal>
                </products>
            </value>
        </li>
        <li Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="MakeAYCharcoalFromBenches"]/recipeUsers</xpath>
            <value>
                <li>DankPyon_Furnace</li>
            </value>
        </li>        
    </operations>
    </Operation>
</Patch>
